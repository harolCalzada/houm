version: "3"
services:
  back:
    container_name: houm-back-local
    build:
      context: ../../
      dockerfile: ./server-config/local/Dockerfile
    restart: unless-stopped
    env_file:
      - ../../.env
    # command: python /www/src/manage.py runserver 0.0.0.0:8000 --settings=config.settings.local
    # entrypoint: ./docker-entrypoint.sh
    volumes:
      - ../../src:/www/src
    depends_on:
      - db
    ports:
      - "8000:8000"
  db:
    container_name: houm-db-local
    # image: "mdillon/postgis:10"
    image: "jeffrosen1092/postgis:latest" # if you are using ARM based machine uncomment this line
    platform: linux/arm64  # if you are using ARM based machine uncomment this line
    restart: unless-stopped
    env_file:
      - ../../.env
    ports:
      - "5435:5432"
    volumes:
      - ../../houm-db:/var/lib/postgresql/data
  
volumes:
  beneficios-db:
    driver: local

